jQuery.fn.extend({validate:function(d){var a=this,c=false,e,b="",g,f={checks:{required:"chkRequired","max-length":"chkMaxLength","min-length":"chkMinLength","max-num":"chkMaxNum","min-num":"chkMinNum",format:"chkFormat",regexp:"chkRegexp"},format:{number:/^[0-9]*$/,"half-char":/^[0-9A-Za-z]*$/,half:/^[¥x20-¥x7e]*$/,"half-kana":/^[ｦ-ﾝ]*$/,url:/^[0-9A-Za-z-_.!~*'()]*$%/,mail:/^(?:(?:(?:(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+)(?:\.(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+))*)|(?:"(?:\\[^\r\n]|[^\\"])*")))\@(?:(?:(?:(?:[a-zA-Z0-9_!#\$\%&'*+/=?\^`{}~|\-]+)(?:\.(?:[a-zA-Z0-9_!#\$\%&''*+/=?\^`{}~|\-]+))*)|(?:\[(?:\\\S|[\x21-\x5a\x5e-\x7e])*\])))$/,"all-char":/^[0-9]*$/},MESSAGES:{REQUIRED:"必須項目です。","MAX-LENGTH":"{length}文字オーバーです。","MIN-LENGTH":"あと{length}文字以上入力して下さい。","MAX-NUM":"{num}以内の数値を入力してください。","MIN-NUM":"{num}以上の数値を入力してください。",REGEXP:"不正な文字が含まれています。",FORMAT:{NUMBER:"数値を入力してください。","HALF-CHAR":"半角英数字で入力してください。",HALF:"半角で入力してください。","HALF-KANA":"半角カナで入力してください。",URL:"有効なURLを入力してください。",MAIL:"不正なメールアドレスです。","ALL-CHAR":"全角文字で入力してください。"}},chkRequired:function(i,h){if(i&&!h){c=true;
e=true;b=d.MESSAGES.REQUIRED;}return a;},chkMaxLength:function(h,i){if(h<i.length){c=true;e=true;b=d.MESSAGES["MAX-LENGTH"].replace(/{length}/g,i.length-h);
}return a;},chkMinLength:function(h,i){if(i.length<h){c=true;e=true;b=d.MESSAGES["MIN-LENGTH"].replace(/{length}/g,h-i.length);}return a;},chkMaxNum:function(h,i){h=parseInt(h,10);
i=parseInt(i,10);if(h<i){c=true;e=true;b=d.MESSAGES["MAX-NUM"].replace(/{num}/g,h);}return a;},chkMinNum:function(h,i){h=parseInt(h,10);i=parseInt(i,10);
if(i<h){c=true;e=true;b=d.MESSAGES["MIN-NUM"].replace(/{num}/g,h);}return a;},chkFormat:function(i,h){if(i==="url"){h=uriEncodeComponent(h);}if(!h.match(d.format[i])&&h){c=true;
e=true;b=d.MESSAGES.FORMAT[i.toUpperCase()];}return a;},chkRegexp:function(h,i){if(i.match(h)){c=true;e=true;b=d.MESSAGES.REGEXP;}return a;},execute:function(){var i,h;
e=false;for(i in d.checks){if(a.data(i)&&!e){h=$.trim(a.val());a[d.checks[i]](a.data(i),h);a.trigger("inputcheck",{error:e,errorMessage:b});}}return a;
},getError:function(){return c;},setValidation:function(){a.bind({blur:a.execute,keydown:function(){setTimeout(function(){a.execute();},0);},paste:function(){setTimeout(function(){a.execute();
},0);},cut:function(){setTimeout(function(){a.execute();},0);},cancel:function(){setTimeout(function(){a.execute();},0);}});return a;},setErrorMesssage:function(i,h){$("div.errorMessage",i.parent()).remove();
if(h.error){if(i.data("pos")==="top"){i.parent().prepend($("<div></div>").addClass("errorMessage").text(h.errorMessage));}else{i.parent().append($("<div></div>").addClass("errorMessage").text(h.errorMessage));
}}return false;},defaultErrorDisp:true};d=$.extend(f,d);a.chkRequired=d.chkRequired;a.chkMaxLength=d.chkMaxLength;a.chkMinLength=d.chkMinLength;a.chkMaxNum=d.chkMaxNum;
a.chkMinNum=d.chkMinNum;a.chkFormat=d.chkFormat;a.chkRegexp=d.chkRegexp;a.execute=d.execute;a.getError=d.getError;a.setValidation=d.setValidation;a.setValidation($('input[type="text"], textarea',a));
if(d.defaultErrorDisp){$('input[type="text"], textarea',a).bind("inputcheck",function(i,h){d.setErrorMesssage($(this),h);});}return a;}});(function(a){a(document).ready(function(){a('[data-role*="validation"]').each(function(){a(this).alidate();
return true;});return false;});}(jQuery));